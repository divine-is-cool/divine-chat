@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');

:root{
  --bg-900: #03030a;
  --bg-800: #050616;
  --panel: rgba(255,255,255,0.03);
  --muted: #9aa3b2;
  --text: #e6eef8;
  --gold: #d4af37;
  --purple-600: #6e2f86;
  --purple-400: #8b4aa8;
  --blue: #0b4a82;
  --radius: 14px;
  --card-radius: 14px;
  --shadow-1: 0 8px 30px rgba(2,6,23,0.6);
  --glass-blur: 8px;
  --max-width: 1100px;
  --ui-gap: 14px;
  --transition: 180ms cubic-bezier(.2,.9,.25,1);
}

/* Light mode overrides */
body.light-mode {
  --bg-900: #f6f7fb;
  --bg-800: #eef1f8;
  --panel: rgba(0,0,0,0.03);
  --muted: #4b5563;
  --text: #0b1220;
  --gold: #b57a08;
  --purple-600: #5b2e6a;
  --purple-400: #7a3f8f;
  --blue: #0b4a82;
  --shadow-1: 0 8px 30px rgba(11,20,40,0.06);
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;color:var(--text);background:
  radial-gradient(1200px 400px at 10% 10%, rgba(110,47,135,0.04), transparent 8%),
  radial-gradient(1000px 300px at 90% 90%, rgba(11,74,130,0.03), transparent 12%),
  linear-gradient(180deg,var(--bg-900),var(--bg-800));
-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
a{color:inherit}

/* Layout */
.container{max-width:var(--max-width);margin:36px auto;padding:20px}

/* Hero */
.hero{
  padding:36px;border-radius:var(--card-radius);
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
  box-shadow: var(--shadow-1);
  display:flex;flex-direction:column;align-items:center;gap:12px;border:1px solid rgba(255,255,255,0.02);
}
.title{
  margin:0;font-weight:800;font-size:2.4rem;color:var(--gold);letter-spacing:-0.02em;
}
.subtitle{margin:0;color:var(--muted);font-size:0.98rem}

/* CTA — vertical column on desktop as requested */
.cta{margin-top:18px;display:flex;gap:12px;justify-content:center;flex-direction:column;width:320px}
.cta.vertical{align-items:stretch}

/* Buttons (soft, 3D, purple) */
.btn{
  display:inline-flex;align-items:center;justify-content:center;padding:14px 18px;border-radius:12px;color:var(--text);font-weight:700;border:none;cursor:pointer;
  transition:transform var(--transition),box-shadow var(--transition);
  box-shadow: 0 8px 22px rgba(2,6,23,0.45);
}
.btn.main{
  background: linear-gradient(180deg, var(--purple-400), var(--purple-600));
  transform: translateY(0);
  border: 1px solid rgba(255,255,255,0.04);
  color: white;
  border-radius: 14px;
  box-shadow: 0 12px 30px rgba(107,43,122,0.18), 0 4px 10px rgba(2,6,23,0.5);
}
.btn.main.outline{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  color: var(--purple-400);
  border:1px solid rgba(255,255,255,0.04);
}
.btn.main:active{transform:translateY(1px)}
.btn.gold{background:linear-gradient(90deg,var(--gold),#c99f2f);color:#07111b}
.btn.purple{background:linear-gradient(90deg,var(--purple-400),var(--purple-600));}
.btn.muted{background:transparent;border:1px solid rgba(255,255,255,0.02);color:var(--muted)}
.btn.action{flex:1;padding:12px}

/* Pane (chat) */
.pane{margin-top:20px;padding:12px;border-radius:var(--card-radius);
  background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));
  border:1px solid rgba(255,255,255,0.02);
  backdrop-filter: blur(var(--glass-blur));
  box-shadow: 0 10px 40px rgba(2,6,23,0.55);
}

/* Chat header with centered title and safe indicator */
.chat-header{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  padding:12px;
  border-bottom:1px solid rgba(255,255,255,0.02);
}
.chat-title{margin:0;font-size:1.25rem;color:var(--gold);font-weight:800;text-align:center}
.chat-meta-row{display:flex;gap:8px;align-items:center}
.safe-indicator{
  font-weight:700;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg, rgba(212,175,55,0.06), rgba(107,43,122,0.03));color:var(--muted);font-size:0.9rem;
  border:1px solid rgba(255,255,255,0.02);
}
.chat-actions-row{display:flex;gap:12px;width:100%;max-width:600px;margin-top:8px}
.chat-actions-row .btn{flex:1;border-radius:10px}

/* Layout grid */
.main-grid{display:grid;grid-template-columns:260px 1fr;gap:16px;margin-top:14px}
.sidebar{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.02);min-height:360px;display:flex;flex-direction:column;gap:12px}
.sidebar h3{margin:0;color:var(--muted);font-weight:600}

/* User list */
.user-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}
.user-list li{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.004));border:1px solid rgba(255,255,255,0.02)}
.left{display:flex;align-items:center;gap:10px}
.avatar{width:36px;height:36px;border-radius:999px;display:inline-grid;place-items:center;font-weight:700;color:#061021;background:linear-gradient(180deg,var(--gold),#c99f2f);box-shadow:0 6px 18px rgba(7,8,12,0.5)}
.user-badge{font-size:0.8rem;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);color:var(--muted);font-weight:600}

/* Chat pane */
.chat{padding:12px;border-radius:12px;min-height:420px;display:flex;flex-direction:column;background:transparent;border:1px solid rgba(255,255,255,0.01)}
.messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:12px;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,0.06) transparent}
.msg{max-width:78%;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.02);animation: msgIn 160ms ease;box-shadow: 0 8px 24px rgba(3,6,20,0.45)}
.msg .meta{font-size:0.78rem;color:var(--muted);margin-bottom:8px;font-weight:600}
.msg .body{white-space:pre-wrap;color:var(--text);line-height:1.45}
.msg.me{margin-left:auto;background:linear-gradient(120deg, rgba(212,175,55,0.06), rgba(107,43,122,0.03));border:1px solid rgba(212,175,55,0.12)}
.msg.host{border:1px solid rgba(212,175,55,0.2);box-shadow: 0 12px 36px rgba(212,175,55,0.04)}
.msg.system{margin:0 auto;background:transparent;color:var(--muted);font-style:italic;text-align:center;padding:6px 10px;border-radius:8px;border:none;box-shadow:none}

/* Typing indicator */
.typing{padding:6px 10px;border-radius:8px;color:var(--muted);text-align:left}

/* Message form */
.msgForm{display:flex;gap:10px;margin-top:12px}
.msgForm input{flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);background:rgba(0,0,0,0.42);color:var(--text);outline:none;transition:box-shadow var(--transition),border-color var(--transition)}
.msgForm input:focus{box-shadow:0 6px 30px rgba(11,74,130,0.12);border-color:rgba(11,74,130,0.2)}
.msgForm button{padding:12px 14px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--gold),var(--purple-400));color:#061021;font-weight:700;cursor:pointer;transition:transform var(--transition)}
.msgForm button:active{transform:translateY(1px)}

/* Modal */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.45));backdrop-filter:blur(4px)}
.modal-card{width:480px;max-width:92%;padding:20px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);box-shadow: 0 12px 36px rgba(3,6,20,0.65)}
.modal-close{position:absolute;right:18px;top:18px;background:transparent;border:none;color:var(--muted);font-size:1.1rem;cursor:pointer}
.form label{display:block;font-size:0.95rem;margin-top:8px;color:var(--muted)}
.form input{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);margin-top:8px;background:transparent;color:var(--text);outline:none}
.form input:focus{box-shadow:0 8px 30px rgba(86,43,138,0.08);border-color:rgba(86,43,138,0.12)}
.toggle-row{display:flex;align-items:center;gap:10px;margin-top:10px}
.segmented{display:inline-flex;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,0.04)}
.seg-btn{padding:8px 12px;background:transparent;border:none;color:var(--muted);cursor:pointer}
.seg-btn.active{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));color:var(--text);font-weight:700}

/* Toast — add error variant */
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:22px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:10px 14px;border-radius:10px;color:var(--muted);border:1px solid rgba(255,255,255,0.02)}
.toast.error{border-color:rgba(220,100,100,0.18);background:linear-gradient(180deg, rgba(220,100,100,0.06), rgba(220,100,100,0.03));color:#ffdede}

/* Hidden helper */
.hidden{display:none}

/* Small screens */
@media (max-width:920px){
  .main-grid{grid-template-columns:1fr;gap:12px}
  .sidebar{order:2}
  .chat{order:1}
  .cta{width:100%}
  .btn.main{width:100%}
}

/* Animations */
@keyframes msgIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

/* Scrollbar (Webkit) */
.messages::-webkit-scrollbar{width:10px}
.messages::-webkit-scrollbar-track{background:transparent}
.messages::-webkit-scrollbar-thumb{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:10px;border:2px solid transparent;background-clip:padding-box}
